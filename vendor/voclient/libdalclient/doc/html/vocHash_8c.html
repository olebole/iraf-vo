<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>DAL Client Library: vocHash.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.9 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>vocHash.c File Reference</h1><code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;ctype.h&gt;</code><br>
<code>#include &quot;vocHash.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">vocHash_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#72f5c9ae81b2bb32bedc227977c6a16a">vht_init</a> (size_t size, int(*hash_func)(void *, size_t, size_t), char *flag)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#454d407896fb38300a92f0bea7958690">vht_search</a> (vocHash_t *hashtable, void *key, size_t keylen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#19acb7b4b7c49a9ec41ada76030d4cc3">vht_findKey</a> (vocHash_t *hashtable, char *key)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#8ab77ddf606c896c49a24649195bd5f8">vht_insert</a> (vocHash_t *hashtable, void *key, size_t keylen, void *value, size_t vallen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#c10bc3cb2dd322dd37d2bb5d217302d8">vht_insertKey</a> (vocHash_t *hashtable, char *key, void *value)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#f721af995025ccae1a6926bffb34afaa">vht_remove</a> (vocHash_t *hashtable, void *key, size_t keylen)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#35b14f27d17a2938929900f11c6bbf1f">vht_removeKey</a> (vocHash_t *hashtable, char *key)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#64fc15aa23fa3c7cdbe28c0a71261cca">vht_grow</a> (vocHash_t *old_ht, size_t new_size)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#5ceef64033b2c50ee38c23c7387b5c88">vht_destroy</a> (vocHash_t *hashtable)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#46cfad5b28658ec453c870c236f3c851">vht_iter_init</a> (vocHash_t *hashtable, vocHash_iter_t *ii)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#a8ffaf0d3951b874415e9dc440608c4e">vht_iter_inc</a> (vocHash_iter_t *ii)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="vocHash_8c.html#80064b2dfe165ff8b51de78374af6218">vht_hash</a> (void *key, size_t keylen, size_t hashtab_size)</td></tr>

</table>
<hr><h2>Detailed Description</h2>
VOCHASH - Simple C Hashtable Class.<p>
vht = vht_init (size, hash_func, flag) obj = vht_search (vht, key, keylen) obj = vht_findKey (vht, stringKey) obj = vht_insert (vht, key, keylen, value, vallen) obj = vht_insertKey (vht, stringKey, value, vallen) vht_remove (vht, key, keylen) vht_removeKey (vht, stringKey) vht_grow (vht, new_size) vht_destroy (vht)<p>
vht_iter_init (vht, iterator) vht_iter_inc (iterator) vht_hash (key, keylen, hashtab_size<p>
The hash table may be any size, set when initially created, and may be nondestructively grown during usage if desired. Growing does not happen automatically, nor is it strictly required, but the hash table can become inefficient if multiple keys has to the same hash slot.<p>
Both keys and values are opaque objects and may be any size. Convenience routines are provided for string-valued keys. A custom hash function may be supplied at init time to hash whatever type of key is supplied. A default has function that merely hashes a sequence of bytes is provided and is the default if no hash function is supplied.<p>
Original by C.Wellons; adapted for VOClient usage by D.Tody Dec 2013<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Doug Tody </dd></dl>
<dl class="version" compact><dt><b>Version:</b></dt><dd>December 2013 </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="5ceef64033b2c50ee38c23c7387b5c88"></a><!-- doxytag: member="vocHash.c::vht_destroy" ref="5ceef64033b2c50ee38c23c7387b5c88" args="(vocHash_t *hashtable)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vht_destroy           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_destroy -- Free all resources used by the hashtable.<p>
hashtable Hashtable to be destroyed. 
<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00349">vht_grow()</a>.</p>

</div>
</div><p>
<a class="anchor" name="19acb7b4b7c49a9ec41ada76030d4cc3"></a><!-- doxytag: member="vocHash.c::vht_findKey" ref="19acb7b4b7c49a9ec41ada76030d4cc3" args="(vocHash_t *hashtable, char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vht_findKey           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_findKey -- Convenience routine to search for a string-valued key.<p>
hashtable Hashtable to be used key Hash key to search for<p>
This routine is limited to string-valued keys. What is returned is a pointer to the external Value object originally input to vht_insertKey. 
<p>References <a class="el" href="vocHash_8c_source.html#l00104">vht_search()</a>.</p>

</div>
</div><p>
<a class="anchor" name="64fc15aa23fa3c7cdbe28c0a71261cca"></a><!-- doxytag: member="vocHash.c::vht_grow" ref="64fc15aa23fa3c7cdbe28c0a71261cca" args="(vocHash_t *old_ht, size_t new_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vht_grow           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>old_ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>new_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
ht_grow -- Grow the hashtable.<p>
old_ht Hash table to be modified. new_size N hash slots in new table.<p>
A pointer to the new hash table is returned upon successful completion, otherwise NULL. If an error occors the old hash table is unmodified. 
<p>References <a class="el" href="vocHash_8c_source.html#l00387">vht_destroy()</a>, <a class="el" href="vocHash_8c_source.html#l00056">vht_init()</a>, <a class="el" href="vocHash_8c_source.html#l00173">vht_insert()</a>, <a class="el" href="vocHash_8c_source.html#l00435">vht_iter_inc()</a>, and <a class="el" href="vocHash_8c_source.html#l00417">vht_iter_init()</a>.</p>

</div>
</div><p>
<a class="anchor" name="80064b2dfe165ff8b51de78374af6218"></a><!-- doxytag: member="vocHash.c::vht_hash" ref="80064b2dfe165ff8b51de78374af6218" args="(void *key, size_t keylen, size_t hashtab_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int vht_hash           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>hashtab_size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_hash -- Default, generic hash function.<p>
key Key to be hashed keylen Size in bytes of the key hashtab_size Number of slots in hash table 
<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00056">vht_init()</a>, <a class="el" href="vocHash_8c_source.html#l00173">vht_insert()</a>, <a class="el" href="vocHash_8c_source.html#l00287">vht_remove()</a>, and <a class="el" href="vocHash_8c_source.html#l00104">vht_search()</a>.</p>

</div>
</div><p>
<a class="anchor" name="72f5c9ae81b2bb32bedc227977c6a16a"></a><!-- doxytag: member="vocHash.c::vht_init" ref="72f5c9ae81b2bb32bedc227977c6a16a" args="(size_t size, int(*hash_func)(void *, size_t, size_t), char *flag)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">vocHash_t* vht_init           </td>
          <td>(</td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void *, size_t, size_t)&nbsp;</td>
          <td class="paramname"> <em>hash_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>flag</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_init -- Create a new, empty hash table.<p>
size N slots in initial hash table hash_func Hash function (optional, may be NULL) flag Set to "case" (default) or "nocase"<p>
A unique key is determined by the hash value of the key data and the keylen in bytes. In this implementation, only a single instance of a key is permitted; inserts for the same key overwrite the old instance. A possible future enhancement would be to permit multiple instances with the same key. 
<p>References <a class="el" href="vocHash_8c_source.html#l00489">vht_hash()</a>.</p>

<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00349">vht_grow()</a>.</p>

</div>
</div><p>
<a class="anchor" name="8ab77ddf606c896c49a24649195bd5f8"></a><!-- doxytag: member="vocHash.c::vht_insert" ref="8ab77ddf606c896c49a24649195bd5f8" args="(vocHash_t *hashtable, void *key, size_t keylen, void *value, size_t vallen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vht_insert           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>keylen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>vallen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_insert -- Insert a key, value pair in the hash table.<p>
hashtable Hashtable to be used key Ptr to the key keylen Size in bytes of the key value Ptr to the value vallen Size in bytes of value data<p>
If a matching key,keylen entry already exists (key and keylen identical) it is updated. If the insertion is successful a pointer to the value element is returned, otherwise NULL is returned. 
<p>References <a class="el" href="vocHash_8c_source.html#l00489">vht_hash()</a>.</p>

<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00349">vht_grow()</a>, and <a class="el" href="vocHash_8c_source.html#l00257">vht_insertKey()</a>.</p>

</div>
</div><p>
<a class="anchor" name="c10bc3cb2dd322dd37d2bb5d217302d8"></a><!-- doxytag: member="vocHash.c::vht_insertKey" ref="c10bc3cb2dd322dd37d2bb5d217302d8" args="(vocHash_t *hashtable, char *key, void *value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vht_insertKey           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_insertKey -- Convenience routine to insert a string-valued key.<p>
hashtable Hash table to be used key Key to be hashed value Pointer to external data object<p>
This routine is limited to string-valued keys. Value is a pointer to some external object. Unlike vht_insert, the content of the Value object is not copied into internal storage, rather only the value of the Value object pointer is stored. 
<p>References <a class="el" href="vocHash_8c_source.html#l00173">vht_insert()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a8ffaf0d3951b874415e9dc440608c4e"></a><!-- doxytag: member="vocHash.c::vht_iter_inc" ref="a8ffaf0d3951b874415e9dc440608c4e" args="(vocHash_iter_t *ii)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vht_iter_inc           </td>
          <td>(</td>
          <td class="paramtype">vocHash_iter_t *&nbsp;</td>
          <td class="paramname"> <em>ii</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_iter_inc -- Incrememt the iterator.<p>
ii Active iterator 
<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00349">vht_grow()</a>, and <a class="el" href="vocHash_8c_source.html#l00417">vht_iter_init()</a>.</p>

</div>
</div><p>
<a class="anchor" name="46cfad5b28658ec453c870c236f3c851"></a><!-- doxytag: member="vocHash.c::vht_iter_init" ref="46cfad5b28658ec453c870c236f3c851" args="(vocHash_t *hashtable, vocHash_iter_t *ii)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vht_iter_init           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vocHash_iter_t *&nbsp;</td>
          <td class="paramname"> <em>ii</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_iter_init -- Initialize a new hash table iterator.<p>
hashtable Hashtable to be iterated ii Iterator 
<p>References <a class="el" href="vocHash_8c_source.html#l00435">vht_iter_inc()</a>.</p>

<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00349">vht_grow()</a>.</p>

</div>
</div><p>
<a class="anchor" name="f721af995025ccae1a6926bffb34afaa"></a><!-- doxytag: member="vocHash.c::vht_remove" ref="f721af995025ccae1a6926bffb34afaa" args="(vocHash_t *hashtable, void *key, size_t keylen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vht_remove           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>keylen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_remove - Delete the given key from the hashtable.<p>
hashtable Hash table to be used key Key to be removed keylen Key length (must match)<p>
It is not an error if the key is not found. 
<p>References <a class="el" href="vocHash_8c_source.html#l00489">vht_hash()</a>.</p>

<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00324">vht_removeKey()</a>.</p>

</div>
</div><p>
<a class="anchor" name="35b14f27d17a2938929900f11c6bbf1f"></a><!-- doxytag: member="vocHash.c::vht_removeKey" ref="35b14f27d17a2938929900f11c6bbf1f" args="(vocHash_t *hashtable, char *key)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vht_removeKey           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>key</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_removeKey -- Convenience routine to remove a string-valued key. 
<p>References <a class="el" href="vocHash_8c_source.html#l00287">vht_remove()</a>.</p>

</div>
</div><p>
<a class="anchor" name="454d407896fb38300a92f0bea7958690"></a><!-- doxytag: member="vocHash.c::vht_search" ref="454d407896fb38300a92f0bea7958690" args="(vocHash_t *hashtable, void *key, size_t keylen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* vht_search           </td>
          <td>(</td>
          <td class="paramtype">vocHash_t *&nbsp;</td>
          <td class="paramname"> <em>hashtable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&nbsp;</td>
          <td class="paramname"> <em>keylen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
vht_search -- Look up the given key in the hash table, returning a pointer to the found entry, or NULL.<p>
hashtable Hashtable to be searched key Hash key keylen Hash key length<p>
The hash key datatype and size is arbitrary but must agree with what the hash function expects. 
<p>References <a class="el" href="vocHash_8c_source.html#l00489">vht_hash()</a>.</p>

<p>Referenced by <a class="el" href="vocHash_8c_source.html#l00141">vht_findKey()</a>.</p>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Tue Sep 23 09:21:35 2014 for DAL Client Library by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.9 </small></address>
</body>
</html>
